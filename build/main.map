{"version":3,"sources":["webpack:///webpack/bootstrap ba06ac10e1c458187846","webpack:///./server/index.js","webpack:///external \"express\"","webpack:///external \"body-parser\"","webpack:///./server/common/env.js","webpack:///external \"dotenv\"","webpack:///./server/generate.js","webpack:///external \"fs\""],"names":["bodyParser","app","use","urlencoded","extended","json","listen","process","env","PORT","config","req","res","next","console","log","body","JSON","parse","Object","keys","output","concat","purpose","call","map","region","join","arguments","notes","writeFile","stringify","err","sendStatus"],"mappings":";;;AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;;;;;;;;;;AC7DA;;;;AACA;;IAAYA,U;;AACZ;;AACA;;;;;;;;AAEA,MAAMC,MAAM,uBAAZ;AACAA,IAAIC,GAAJ,CAAQF,WAAWG,UAAX,CAAsB,EAAEC,UAAU,IAAZ,EAAtB,CAAR;AACAH,IAAIC,GAAJ,CAAQF,WAAWK,IAAX,EAAR;AACAJ,IAAIC,GAAJ,CAAQ,kBAAR;;AAEAD,IAAIK,MAAJ,CAAWC,QAAQC,GAAR,CAAYC,IAAvB,E;;;;;;ACVA,oC;;;;;;ACAA,wC;;;;;;;;;ACAA;;;;;;AAEA,iBAAOC,MAAP,G;;;;;;ACFA,mC;;;;;;;;;;;;;ACAA;;;;;;kBAEe,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,KAAoB;AACjCC,UAAQC,GAAR,CAAY,MAAZ;AACA,QAAMC,OAAOC,KAAKC,KAAL,CAAWC,OAAOC,IAAP,CAAYT,IAAIK,IAAhB,EAAsB,CAAtB,CAAX,CAAb;AACA,QAAMK,SAAS,GAAGC,MAAH,CAAU;AACvBC,aAAS,yBADc;AAEvBC,UAAO;;;;;;;;;;;;;;;;OAiBTL,OAAOC,IAAP,CAAYJ,IAAZ,EAAkBS,GAAlB,CAAsBC,UAAW,4CAA2CA,MAAO;;;YAAnF,EAGYC,IAHZ,CAGiB,MAHjB,CAID;KAvB0B;AAyBvBC,eAAW;AAzBY,GAAV,EA2BZN,MA3BY,CA2BL;AACNC,aAAS,yBADH;AAENC,UAAO;;;;;;;;;;;;;;;;SAiBXL,OAAOC,IAAP,CAAYJ,IAAZ,EAAkBS,GAAlB,CAAsBC,UAAW,4CAA2CA,MAAO;;;cAAnF,EAGcC,IAHd,CAGmB,MAHnB,CAID;OAvBW;AAyBNC,eAAW;AAzBL,GA3BK,EAsDZN,MAtDY,CAsDL;AACNC,aAAS,mBADH;AAENC,UAAO;;;;;;;;;;;CAFD;AAcNI,eAAW,EAdL;AAeNC,WAAO;AAfD,GAtDK,EAuEZP,MAvEY,CAuEL;AACNC,aAAS,oBADH;AAENC,UAAO;;;;;;;;;;;;;;;;;;;;UAFD;AAuBNI,eAAW,EAvBL;AAwBNC,WAAQ;;;AAxBF,GAvEK,EAmGZP,MAnGY,CAmGL;AACNC,aAAS,oCADH;AAENC,UAAO;;;;;;;;;;;;;;OAFD;AAiBNI,eAAW,EAjBL;AAkBNC,WAAQ;;;;AAlBF,GAnGK,EA0HZP,MA1HY,CA0HL;AACNC,aAAS,yBADH;AAENC,UAAO;;;;;;;OAFD;AAUNI,eAAW,EAVL;AAWNC,WAAO;AAXD,GA1HK,CAAf;AAuIA;AACA,eAAGC,SAAH,CAAa,aAAb,EAA4Bb,KAAKc,SAAL,CAAeV,MAAf,EAAuB,IAAvB,EAA6B,CAA7B,CAA5B,EAA6DW,OAAO;AAClE,QAAIA,GAAJ,EAAS,MAAMA,GAAN;AACTlB,YAAQC,GAAR,CAAY,0BAAZ;AACD,GAHD;AAIAH,MAAIqB,UAAJ,CAAe,GAAf;AACD,C;;;;;;AClJD,+B","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap ba06ac10e1c458187846","import Express from 'express';\nimport * as bodyParser from 'body-parser';\nimport './common/env';\nimport generate from './generate';\n\nconst app = new Express();\napp.use(bodyParser.urlencoded({ extended: true }));\napp.use(bodyParser.json());\napp.use('/api/v1/generate', generate);\n\napp.listen(process.env.PORT);\n\n\n\n// WEBPACK FOOTER //\n// ./server/index.js","module.exports = require(\"express\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express\"\n// module id = 2\n// module chunks = 0","module.exports = require(\"body-parser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"body-parser\"\n// module id = 3\n// module chunks = 0","import dotenv from 'dotenv';\n\ndotenv.config();\n\n\n\n// WEBPACK FOOTER //\n// ./server/common/env.js","module.exports = require(\"dotenv\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"dotenv\"\n// module id = 5\n// module chunks = 0","import fs from 'fs';\n\nexport default (req, res, next) => {\n  console.log('ran!');\n  const body = JSON.parse(Object.keys(req.body)[0]);\n  const output = [].concat({\n    purpose: 'Create regional lambdas',\n    call: `\n    import AWS from 'aws-sdk';\n    var params = {\n      Code: {\n        use S3 info from below\n      },\n      Description: 'Create a reagional lambda',\n      FunctionName: createRegionalLambda,\n      MemorySize: 128,\n      Publish: true,\n      Role: \"arn:aws:iam::123456789012:role/service-role/*our role name*\",\n      Runtime: \"nodejs4.3\",\n      Timeout: 15,\n      VpcConfig: {\n      }\n     };\n     ${\n  Object.keys(body).map(region => `lambda.createFunction({...params, region:${region}, function(err, data) {\n          if (err) console.log(err, err.stack);\n          else     console.log(data);\n         })`).join('\\n\\n')\n}\n    `,\n    arguments: '',\n  })\n    .concat({\n      purpose: 'Create personal lambdas',\n      call: `\n      import AWS from 'aws-sdk';\n      var params = {\n        Code: {\n          use S3 info from below\n        },\n        Description: 'Create a personal lambda',\n        FunctionName: createPersonalLambda,\n        MemorySize: 128,\n        Publish: true,\n        Role: \"arn:aws:iam::123456789012:role/service-role/*our role name*\",\n        Runtime: \"nodejs4.3\",\n        Timeout: 15,\n        VpcConfig: {\n        }\n       };\n       ${\n  Object.keys(body).map(region => `lambda.createFunction({...params, region:${region}, function(err, data) {\n            if (err) console.log(err, err.stack);\n            else     console.log(data);\n           })`).join('\\n\\n')\n}\n      `,\n      arguments: '',\n    })\n    .concat({\n      purpose: 'Create person dbs',\n      call: `\n      var cloudformation = new AWS.CloudFormation();\n      var params = {\n          ChangeSetName: 'STRING_VALUE', /* required */\n          ClientRequestToken: 'STRING_VALUE',\n          StackName: 'STRING_VALUE'\n      };\n      cloudformation.executeChangeSet(params, function(err, data) {\n          if (err) console.log(err, err.stack); // an error occurred\n          else     console.log(data);           // successful response\n      });\n`,\n      arguments: '',\n      notes: 'http://docs.aws.amazon.com/AWSJavaScriptSDK/latest/AWS/CloudFormation.html',\n    })\n    .concat({\n      purpose: 'Create API gateway',\n      call: `\n      var apigateway = new AWS.APIGateway();\n      var params = {\n        customerId: 'STRING_VALUE',\n        description: 'STRING_VALUE',\n        enabled: true || false,\n        generateDistinctId: true || false,\n        name: 'STRING_VALUE',\n        stageKeys: [\n          {\n            restApiId: 'STRING_VALUE',\n            stageName: 'STRING_VALUE'\n          },\n          /* more items */\n        ],\n        value: 'STRING_VALUE'\n      };\n      apigateway.createApiKey(params, function(err, data) {\n        if (err) console.log(err, err.stack); // an error occurred\n        else     console.log(data);           // successful response\n      });`,\n      arguments: '',\n      notes: `\n      http://docs.aws.amazon.com/AWSJavaScriptSDK/latest/AWS/APIGateway.html\n      `,\n    })\n    .concat({\n      purpose: 'Create VPC (Virtual Private Cloud)',\n      call: `\n      import AWS from 'aws-sdk';\n      const ec2 = new AWS.EC2();\n      let vpc = undefined;\n      ec2.createDefaultVpc({DryRun:true},(error,data)=>{\n          if(error==='DryRunOperation')\n            ec2.createDefaultVpc({DryRun:false},(error,data)=>{\n                vpc = data.vpc;\n                //use ec2.createDhcpOptions,createInternetGateway, etc\n                //consider using creatVpc instead of default\n            })\n          else\n            throw new Error('no permissions');\n      })\n      `,\n      arguments: '',\n      notes: `\n      http://docs.aws.amazon.com/AWSJavaScriptSDK/latest/AWS/EC2.html#createDefaultVpc-property\n      this step may be optional, simply updating data inside existing VPC may be suffecient.\n      `,\n    })\n    .concat({\n      purpose: 'Get code from S3 source',\n      call: `\n      import AWS from 'aws-sdk';\n      const s3 = new AWS.S3();\n      const html = s3.getObject({Bucket: *bucketName*/client, Key: 'index.html'}).createReadStream();\n      const clientJs = s3.getObject({Bucket: *bucketName*/client, Key: 'bundle.js'}).createReadStream();\n      const regionalL = s3.getObject({Bucket: *bucketName*/regional, Key: 'bundle.js'}).createReadStream();\n      const userL = s3.getObject({Bucket: *bucketName*/user, Key: 'bundle.js'}).createReadStream();\n      `,\n      arguments: '',\n      notes: 'use the file streams provided to pipe or read out code for the lamda\\'s and client',\n    });\n  // fs.unlinkSync('mammal.json');\n  fs.writeFile('mammal.json', JSON.stringify(output, null, 2), err => {\n    if (err) throw err;\n    console.log('The file has been saved!');\n  });\n  res.sendStatus(200);\n};\n\n\n\n// WEBPACK FOOTER //\n// ./server/generate.js","module.exports = require(\"fs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fs\"\n// module id = 7\n// module chunks = 0"],"sourceRoot":""}